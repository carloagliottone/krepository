<div class="container">
    <mat-card>
        <div class="container">
            <div class="row">
                <div class="col-2" style="padding-left: 0px; padding-bottom: 5px">
                    <button mat-fab color="warn" href="javascript:void(0)" [routerLink]="['/login']"
                        style="margin-right: 5px">
                        <img src="assets/images/user_white.png" width="24" height="24" />
                    </button>
                    <button mat-fab color="warn" (click)="printComponent()" style="margin-right: 5px">
                        <img src="assets/images/print_white.png" width="24" height="24" />
                    </button>
                </div>
                <div class="col">
                </div>
                <div class="col-3" style="display: block; padding: 0px;">
                    <!--<a style=""><b>user: {{name}}</b></a>-->
                    <div class="card" style="float: right;">
                        <div class="card-header">
                            <b>Logged User: </b>
                            <span *ngIf="name!=null" style="color:#800000;"> {{name}} </span>
                            <span *ngIf="name==null" style="color:#800000;"> - </span>
                            <button type="button" *ngIf="name!=null" class="btn btn-danger" matTooltip="Click Logout Button" (click)="logout()">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <mat-toolbar color="warn">
            <div class="container text-center" style="color:rgb(0, 0, 0);">
                <br>
                <a>
                    <img src="assets/images/logo.png" width="100" height="100" />
                </a>
                <br>
                <h1>Magellano</h1>
            </div>
        </mat-toolbar>
        <br><br>
        <!--<button mat-fab color="warn" (click)="printComponent()">
            <img src="assets/images/print_white.png" width="30" height="30"/>
        </button>-->
        
        <mat-card-content>
            <form [formGroup]="userForm" (ngSubmit)="onFormSubmit()" class="col-12">
                <div class="table-responsive">
                    <table *ngIf="name!=null">
                        <tr>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input formControlName="Nome" matTooltip="Inserisci Nome" matInput
                                        placeholder="Nome">
                                </mat-form-field>
                                <mat-error>
                                    <span *ngIf="!userForm.get('Nome').value && userForm.get('Nome').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input formControlName="Cognome" matTooltip="Inserisci Cognome" matInput
                                        placeholder="Cognome">
                                </mat-form-field>
                                <mat-error>
                                    <span
                                        *ngIf="!userForm.get('Cognome').value && userForm.get('Cognome').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input matTooltip="Inserisci Telefono" formControlName="Telefono" matInput
                                        placeholder="Telefono">
                                </mat-form-field>
                                <mat-error>
                                    <span
                                        *ngIf="!userForm.get('Telefono').value && userForm.get('Telefono').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input matTooltip="Inserisci Cellulare" formControlName="Cellulare" matInput
                                        placeholder="Cellulare">
                                </mat-form-field>
                                <mat-error>
                                    <span
                                        *ngIf="!userForm.get('Cellulare').value && userForm.get('Cellulare').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2 content-center">
                                <button type="submit" mat-raised-button color="warn" matTooltip="Click Submit Button"
                                    [disabled]="!userForm.valid">Submit</button>
                            </td>
                            <td class="px-2 content-center">
                                <button type="reset" mat-raised-button color="warn" matTooltip="Click Reset Button"
                                    (click)="resetForm()">Reset</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input matTooltip="Inserisci Matricola" formControlName="Matricola" matInput
                                        placeholder="Matricola">
                                </mat-form-field>
                                <mat-error>
                                    <span
                                        *ngIf="!userForm.get('Matricola').value && userForm.get('Matricola').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input formControlName="Account" matTooltip="Inserisci Account Code" matInput
                                        placeholder="Account">
                                </mat-form-field>
                                <mat-error>
                                    <span
                                        *ngIf="!userForm.get('Account').value && userForm.get('Account').touched"></span>
                                </mat-error>
                            </td>
                            <td class="px-2">
                                <mat-form-field class="demo-full-width">
                                    <input matTooltip="Inserisci Email" formControlName="Email" matInput
                                        placeholder="Email">
                                </mat-form-field>
                                <mat-error>
                                    <span *ngIf="!userForm.get('Email').value && userForm.get('Email').touched"></span>
                                </mat-error>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-2" colspan="3">
                                <p *ngIf="dataSaved" style="color:rgb(24, 10, 151);font-size:20px;font-weight:bold"
                                    Class="success">
                                    {{massage}}
                                </p>
                            </td>
                        </tr>
                    </table>
                </div>
                <br><br>
                <div class="input-group mb-3">
                    <div class="col-12">
                        <input type="text" class="form-control" name="search" [(ngModel)]="filteredString"
                            [ngModelOptions]="{standalone: true}" placeholder="Nome da Cercare">
                          
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover" id="UserTable">
                        <thead>
                            <tr ngclass="btn-warn">
                                <!--<th class="tbl2">Id</th>-->
                                <th class="tbl2">Cognome</th>
                                <th class="tbl2">Nome</th>
                                <th class="tbl2">Matricola</th>
                                <th class="tbl2">Account</th>
                                <th class="tbl2">Telefono</th>
                                <th class="tbl2">Cellulare</th>
                                <th class="tbl2">Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let user of allUsers | filter:filteredString | async">
                                <!--<td class="tbl2">{{user.ID}}</td>-->
                                <td class="tbl2">{{user.Cognome}}</td>
                                <td class="tbl2">{{user.Nome}}</td>
                                <td class="tbl2">{{user.Matricola}}</td>
                                <td class="tbl2">{{user.Account}}</td>
                                <td class="tbl2">{{user.Telefono}}</td>
                                <td class="tbl2">{{user.Cellulare}}</td>
                                <td class="tbl2">{{user.Email}}</td>
                                <td class="col-md-1" *ngIf="name!=null">
                                    <button type="button" class="btn btn-warning" matTooltip="Click Edit Button"
                                        (click)="loadUserToEdit(user.ID)">Modifica</button>
                                </td>
                                <td class="col-md-1" *ngIf="name!=null">
                                    <button type="button" class="btn btn-danger" matTooltip="Click Delete Button"
                                        (click)="deleteUser(user.ID)">Cancella</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>